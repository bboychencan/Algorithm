# 943. Find the Shortest Superstring

这一次的weekly前三道题我20分钟AC了，还在想这次的题有点简单。结果就在这一题上卡了1个小时没做出来。
我面对这个题的时候发散了几个思路，最终还没想出答案，但是看了讨论之后发现我其中一条思路是正确的，记录一下我的思维过程
1.第一反应是两两判断首尾是否有公共子串然后就可以合并了
2.但是当出现第三个字符串的时候，我一直无法判断前两个的合并是否正确，
3.我拿了好几个例子来实验，发现前两个确实不能用贪心来合并，很可能第三个更适合其中一个的首尾拼接
4.我闪现出了一个通过连接图来记录每个字符串可达点的方法。但是在形成图之后我没有想法该怎么做。
5.我继续试图用我熟悉的动归来解决，一心想找出来最优子结构。可是发现似乎没有这个规律，前n-1想的最优解始终找不到跟第n项之间的关系。我卡在了这里，写了好多个例子，试图找出规律，但是时间很快就过去了。
6.我也想到了先进行排序，不过排序后发现似乎没有什么帮助，排序可以让有共同前缀的字符串聚在一起，但是对拼接似乎没有作用。要做拼接需要的是首尾有共同序列。
7.看了讨论提示后，才发现高票答案用了连接图的方法，然后用traveling salesman求解最短路径。

总结一下：我的思维发散过程中，这次确实是找到了线索，但是没有深挖下去。原因是我对旅行商问题似乎做的不多。 一想到图我脑子里反应出来的是深搜，dp。 但是这一题当时那一瞬间我没有在脑子里建立起旅行商问题和这个题解的联系。

我想过说记录每个字符串可以首尾衔接的字符串的列表，但是下一步该怎么办我那一瞬间没有思路，所以就放弃了。脑海里试图在脑中构建图的搜索过程，发现复杂度过高，没法直观的在脑子里模拟，所以放弃了。

当时想到构建了图，然后应该想到首尾遍历然后知道遍历所有结点，然后找到最小值。 但是我当时可能有几个疑问，一个是怎么样保证这样一直首尾连接下去得到的是最优解。 另一个是当时想到了固定某个跟的遍历，觉得固定这个根的遍历可能无法得到最优，需要从所有点都遍历下。 当时脑子中试图模拟这个过程，发现复杂度太高，所以没有继续往下想了。

经验就
1.首先对旅行商问题不够熟悉。
2.第二就是当把问题抽象为图问题之后，应该去想图的已有的问题和解法，而非试图在脑中模拟图的求解过程，那样势必太难。应该联系到现有的解法。
3.或许一条思路如果超过5分钟没有明确方法的话，应该换条思路。每条思路又不能太短，如果只是脑子一闪而过，很可能错失



这一题隔了一个月学习了旅行商问题，研究了别人的答案后，终于写出了AC，从理解这个解法到自己写出AC花了将近8个小时，可以说是目前遇到的最难的问题了。

这一道题比较复杂，首先关于这个最优子结构，一开始有点卡壳，看了一些blog，总觉得哪里不对。后来才发现很多blog写的最优子结构是针对已经固定出发点的情况，且在遍历完之后需要回到出发点。
而这一题虽然是旅行商问题，但是有一些变化
1. 没有说明出发点，需要考虑所有出发点的解，最后再求出最
2. 这里没有要求回到初始点，只需要遍历所有点即可。
3. 这里有一个path储存最优路径，这个在很多其他的blog上没有看到。 这个path非常重要，非常smart
总结一下，旅行商问题可能会有很多变种，取决于出发点是否固定，是否要返回终点等，针对具体情况，需要有所针对的变动。
尤其是很多边界条件需要谨慎。
以后问题不仅需要给出最优解的值还需要给出最优路径的时候，一定要想到用path去存储最优路径的上一个结点，非常关键！

## Update on 2020/04/03
时隔四个月再次遇到类似的题目，一时间没有思路，大概花费了1多分钟想到了这是一道旅行商问题，同时意识到似乎有些压缩的操作，但是由于这类题目练的少，想不出具体的解法。
关键的是当时还不知道这类题目叫做状态压缩dp，在李煜东的书里有讲解过，这次算是打通了这个概念，加深了状态压缩的思想，剩下的就是再熟练梳理出最优子结构和状态转移方程。
这次重新手写一遍，然后把答案记录一下。
